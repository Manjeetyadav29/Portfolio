<header class="fixed top-0 left-0 right-0 z-50 transition-all duration-300" [ngClass]="{
    'bg-white/80': scrolled() && !themeService.isDark(),
    'dark:bg-slate-900/80': scrolled(),
    'backdrop-blur-lg': scrolled(),
    'shadow-sm': scrolled(),
    'border-b': scrolled(),
    'border-slate-200': scrolled() && !themeService.isDark(),
    'dark:border-slate-800': scrolled()
  }" role="banner">

  <nav class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8" aria-label="Main navigation">
    <div class="flex items-center justify-between h-16 sm:h-20">

      <!-- Logo / Name -->
      <a routerLink="/" class="flex items-center gap-2.5 group" aria-label="Manjeet Yadav - Home"
        (click)="closeMobileMenu()">
        <div
          class="w-9 h-9 rounded-lg bg-gradient-to-br from-primary-500 to-blue-600 flex items-center justify-center shadow-sm group-hover:shadow-md group-hover:scale-105 transition-all duration-300">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <rect x="2" y="2" width="4" height="4" fill="white" />
            <rect x="8" y="2" width="4" height="4" fill="white" opacity="0.6" />
            <rect x="14" y="2" width="4" height="4" fill="white" />
            <rect x="2" y="8" width="4" height="4" fill="white" opacity="0.6" />
            <rect x="8" y="8" width="4" height="4" fill="white" />
            <rect x="14" y="8" width="4" height="4" fill="white" opacity="0.6" />
            <rect x="2" y="14" width="4" height="4" fill="white" />
            <rect x="8" y="14" width="4" height="4" fill="white" opacity="0.6" />
            <rect x="14" y="14" width="4" height="4" fill="white" />
          </svg>
        </div>
        <span class="font-bold text-lg text-slate-900 dark:text-white hidden sm:block tracking-tight">
          Manjeet<span class="text-primary-600 dark:text-primary-400">.</span>
        </span>
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden lg:flex items-center gap-1">
        @for (item of navItems; track item.path) {
        <a [routerLink]="item.path"
          routerLinkActive="text-primary-600 dark:text-primary-400 bg-primary-50 dark:bg-primary-900/20"
          [routerLinkActiveOptions]="{ exact: item.exact ?? false }" class="px-3 py-2 rounded-lg text-sm font-medium
                    text-slate-600 dark:text-slate-300
                    hover:text-primary-600 dark:hover:text-primary-400
                    hover:bg-slate-100 dark:hover:bg-slate-800
                    transition-all duration-200">
          {{ item.label }}
        </a>
        }
      </div>

      <!-- Actions -->
      <div class="flex items-center gap-2">
        <!-- Theme Toggle -->
        <button (click)="themeService.toggle()" class="relative inline-flex items-center justify-center w-10 h-10 rounded-lg
                 text-slate-600 dark:text-slate-300
                 hover:bg-slate-100 dark:hover:bg-slate-800
                 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2
                 dark:focus:ring-offset-slate-900
                 transition-all duration-200"
          [attr.aria-label]="themeService.isDark() ? 'Switch to light mode' : 'Switch to dark mode'" type="button">
          <!-- Sun icon (shown in dark mode) -->
          @if (themeService.isDark()) {
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
          </svg>
          } @else {
          <!-- Moon icon (shown in light mode) -->
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
          </svg>
          }
        </button>

        <!-- Hire Me CTA (Desktop) -->
        <a routerLink="/contact" class="hidden sm:inline-flex btn-primary text-sm px-4 py-2">
          Hire Me
        </a>

        <!-- Mobile Menu Toggle -->
        <button (click)="toggleMobileMenu()" class="lg:hidden inline-flex items-center justify-center w-10 h-10 rounded-lg
                 text-slate-600 dark:text-slate-300
                 hover:bg-slate-100 dark:hover:bg-slate-800
                 focus:outline-none focus:ring-2 focus:ring-primary-500
                 transition-all duration-200" [attr.aria-expanded]="mobileMenuOpen()" aria-controls="mobile-menu"
          aria-label="Toggle navigation menu" type="button">
          @if (mobileMenuOpen()) {
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
          } @else {
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
          </svg>
          }
        </button>
      </div>
    </div>

    <!-- Mobile Menu -->
    @if (mobileMenuOpen()) {
    <div id="mobile-menu" class="lg:hidden border-t border-slate-200 dark:border-slate-700 py-4 animate-slide-up"
      role="navigation" aria-label="Mobile navigation">
      <div class="flex flex-col gap-1">
        @for (item of navItems; track item.path) {
        <a [routerLink]="item.path"
          routerLinkActive="text-primary-600 dark:text-primary-400 bg-primary-50 dark:bg-primary-900/20"
          [routerLinkActiveOptions]="{ exact: item.exact ?? false }" (click)="closeMobileMenu()" class="px-4 py-3 rounded-lg text-base font-medium
                      text-slate-600 dark:text-slate-300
                      hover:text-primary-600 dark:hover:text-primary-400
                      hover:bg-slate-100 dark:hover:bg-slate-800
                      transition-all duration-200">
          {{ item.label }}
        </a>
        }
        <div class="pt-3 mt-2 border-t border-slate-200 dark:border-slate-700">
          <a routerLink="/contact" (click)="closeMobileMenu()" class="btn-primary w-full text-center">
            Hire Me
          </a>
        </div>
      </div>
    </div>
    }
  </nav>
</header>