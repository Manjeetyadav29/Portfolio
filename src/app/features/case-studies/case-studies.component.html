<section class="pt-28 pb-16 relative" aria-label="Case Studies">
  <!-- Background accent -->
  <div class="absolute inset-0 -z-10" aria-hidden="true">
    <div class="absolute top-0 right-0 w-96 h-96 bg-primary-400/5 dark:bg-primary-500/5 rounded-full blur-3xl"></div>
    <div class="absolute bottom-0 left-0 w-80 h-80 bg-blue-400/5 dark:bg-blue-500/5 rounded-full blur-3xl"></div>
  </div>

  <div class="section-container">

    <app-section-header
      label="Portfolio"
      title="Enterprise Case Studies"
      subtitle="Real-world projects showcasing architecture decisions, performance gains, and measurable business impact." />

    <!-- Project count -->
    <div class="text-center mb-10" appScrollReveal="fade-up">
      <span class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 text-sm font-medium border border-primary-100 dark:border-primary-800/30">
        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 00.75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 00-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0112 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 01-.673-.38m0 0A2.18 2.18 0 013 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 013.413-.387m7.5 0V5.25A2.25 2.25 0 0013.5 3h-3a2.25 2.25 0 00-2.25 2.25v.894m7.5 0a48.667 48.667 0 00-7.5 0M12 12.75h.008v.008H12v-.008z" />
        </svg>
        {{ caseStudies.length }} Projects
      </span>
    </div>

    <!-- Case Study Cards -->
    <div class="space-y-8">
      @for (study of caseStudies; track study.slug; let i = $index) {
        <article class="card overflow-hidden group" appScrollReveal="fade-up" [revealDelay]="i * 100">
          <!-- Top accent bar -->
          <div class="h-1 bg-gradient-to-r from-primary-500 via-blue-500 to-primary-400 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>

          <div class="p-6 sm:p-8">
            <!-- Header -->
            <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-6">
              <div>
                <div class="flex items-center gap-3 mb-3">
                  <span class="badge">{{ study.year }}</span>
                  <span class="text-sm text-slate-500 dark:text-slate-400">{{ study.subtitle }}</span>
                </div>
                <h3 class="heading-3 text-slate-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors duration-300">
                  {{ study.title }}
                </h3>
              </div>
              <a [routerLink]="['/case-studies', study.slug]"
                 class="btn-primary text-sm px-5 py-2.5 flex-shrink-0 group/btn">
                View Details
                <svg class="w-4 h-4 group-hover/btn:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
                </svg>
              </a>
            </div>

            <p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-6">{{ study.description }}</p>

            <!-- Metrics Grid -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-6">
              @for (metric of study.results; track metric.label) {
                <div class="bg-slate-50 dark:bg-slate-900/50 rounded-xl p-4 text-center border border-slate-100 dark:border-slate-800/50 hover:border-primary-200 dark:hover:border-primary-800/30 transition-colors">
                  <p class="text-xs text-slate-500 dark:text-slate-400 mb-1.5 font-medium">{{ metric.label }}</p>
                  <div class="flex items-center justify-center gap-2">
                    <span class="text-xs text-red-400 line-through">{{ metric.before }}</span>
                    <svg class="w-3 h-3 text-green-500" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
                    </svg>
                    <span class="text-sm font-bold text-green-600 dark:text-green-400">{{ metric.after }}</span>
                  </div>
                  <p class="text-[10px] text-green-600 dark:text-green-400 font-semibold mt-1.5 bg-green-50 dark:bg-green-900/20 rounded-full px-2 py-0.5 inline-block">{{ metric.improvement }}</p>
                </div>
              }
            </div>

            <!-- Tech Stack -->
            <div class="flex flex-wrap gap-2">
              @for (tech of study.technologies; track tech) {
                <span class="tech-badge">{{ tech }}</span>
              }
            </div>
          </div>
        </article>
      }
    </div>

  </div>
</section>
